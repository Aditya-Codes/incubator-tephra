<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Fri Aug 04 12:03:02 PDT 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TransactionPruningPlugin (Apache Tephra 0.12.0-incubating API)</title>
<meta name="date" content="2017-08-04">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TransactionPruningPlugin (Apache Tephra 0.12.0-incubating API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TransactionPruningPlugin.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/tephra/txprune/RegionPruneInfo.html" title="class in org.apache.tephra.txprune"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/tephra/txprune/TransactionPruningRunnable.html" title="class in org.apache.tephra.txprune"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/tephra/txprune/TransactionPruningPlugin.html" target="_top">Frames</a></li>
<li><a href="TransactionPruningPlugin.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.tephra.txprune</div>
<h2 title="Interface TransactionPruningPlugin" class="title">Interface TransactionPruningPlugin</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../org/apache/tephra/hbase/txprune/HBaseTransactionPruningPlugin.html" title="class in org.apache.tephra.hbase.txprune">HBaseTransactionPruningPlugin</a></dd>
</dl>
<hr>
<br>
<pre>@Beta
public interface <span class="strong">TransactionPruningPlugin</span></pre>
<div class="block">Interface to manage the invalid transaction list.

 <p/>
 An invalid transaction can only be removed from the invalid list after the data written
 by the invalid transactions has been removed from all the data stores.
 The term data store is used here to represent a set of tables in a database that have
 the same data clean up policy, like all Apache Phoenix tables in an HBase instance.

 <p/>
 Typically every data store will have a background job which cleans up the data written by invalid transactions.
 Prune upper bound for a data store is defined as the largest invalid transaction whose data has been
 cleaned up from that data store.

 <p/>
 There will be one such plugin per data store. The plugins will be executed as part of the Transaction Service.
 Each plugin will be invoked periodically to fetch the prune upper bound for its data store.
 Invalid transaction list can pruned up to the minimum of prune upper bounds returned by all the plugins.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/tephra/txprune/TransactionPruningPlugin.html#destroy()">destroy</a></strong>()</code>
<div class="block">Called once during the shutdown of the Transaction Service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/tephra/txprune/TransactionPruningPlugin.html#fetchPruneUpperBound(long,%20long)">fetchPruneUpperBound</a></strong>(long&nbsp;time,
                    long&nbsp;inactiveTransactionBound)</code>
<div class="block">Called periodically to fetch prune upper bound for a data store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/tephra/txprune/TransactionPruningPlugin.html#initialize(org.apache.hadoop.conf.Configuration)">initialize</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf)</code>
<div class="block">Called once when the Transaction Service starts up.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/tephra/txprune/TransactionPruningPlugin.html#pruneComplete(long,%20long)">pruneComplete</a></strong>(long&nbsp;time,
             long&nbsp;maxPrunedInvalid)</code>
<div class="block">Called after successfully pruning the invalid list using the prune upper bound returned by
 <a href="../../../../org/apache/tephra/txprune/TransactionPruningPlugin.html#fetchPruneUpperBound(long,%20long)"><code>fetchPruneUpperBound(long, long)</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initialize(org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>void&nbsp;initialize(org.apache.hadoop.conf.Configuration&nbsp;conf)
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Called once when the Transaction Service starts up.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>conf</code> - configuration for the plugin</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="fetchPruneUpperBound(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchPruneUpperBound</h4>
<pre>long&nbsp;fetchPruneUpperBound(long&nbsp;time,
                        long&nbsp;inactiveTransactionBound)
                          throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Called periodically to fetch prune upper bound for a data store. The plugin examines the state of data cleanup
 in the data store, and determines an upper bound for invalid transactions such that any invalid transaction
 smaller than or equal to this upper bound is guaranteed to have all its writes removed from the data store.
 It then returns this upper bound as the prune upper bound for this data store.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>time</code> - start time of this prune iteration in milliseconds</dd><dd><code>inactiveTransactionBound</code> - the largest invalid transaction that can be possibly removed
                                 from the invalid list for the given time. This is an upper bound determined
                                 by the Transaction Service, based on its knowledge of in-progress and invalid
                                 transactions that may still have active processes and therefore future writes.
                                 The plugin will typically return a reduced upper bound based on the state of
                                 the invalid transaction data clean up in the data store.</dd>
<dt><span class="strong">Returns:</span></dt><dd>prune upper bound for the data store</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="pruneComplete(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pruneComplete</h4>
<pre>void&nbsp;pruneComplete(long&nbsp;time,
                 long&nbsp;maxPrunedInvalid)
                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Called after successfully pruning the invalid list using the prune upper bound returned by
 <a href="../../../../org/apache/tephra/txprune/TransactionPruningPlugin.html#fetchPruneUpperBound(long,%20long)"><code>fetchPruneUpperBound(long, long)</code></a>.
 The largest invalid transaction that was removed from the invalid list is passed as a parameter in this call.
 The plugin can use this information to clean up its state.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>time</code> - start time of this prune iteration in milliseconds (same value as passed to
             <a href="../../../../org/apache/tephra/txprune/TransactionPruningPlugin.html#fetchPruneUpperBound(long,%20long)"><code>fetchPruneUpperBound(long, long)</code></a> in the same run)</dd><dd><code>maxPrunedInvalid</code> - the largest invalid transaction that was removed from the invalid list</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="destroy()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>destroy</h4>
<pre>void&nbsp;destroy()</pre>
<div class="block">Called once during the shutdown of the Transaction Service.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TransactionPruningPlugin.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/tephra/txprune/RegionPruneInfo.html" title="class in org.apache.tephra.txprune"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/tephra/txprune/TransactionPruningRunnable.html" title="class in org.apache.tephra.txprune"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/tephra/txprune/TransactionPruningPlugin.html" target="_top">Frames</a></li>
<li><a href="TransactionPruningPlugin.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2017 <a href="http://www.apache.org">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
